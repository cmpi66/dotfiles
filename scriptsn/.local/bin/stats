#!/usr/bin/env bash

CPUTemp=$(sensors | awk '/Tctl|Tdie|edge/ {print $2; exit}')

# Count available upgrades
# UpgradeCount=$(pacman -Qu | grep -Fcv "[ignored]")
# UpgradeCount=$(PORTAGE_QUIET=1 emerge -avqpuND @world | grep "ebuild" | wc -l)
workspace=$(hyprctl activeworkspace -j | jq '.id')

notify-send -t 8000 "$(
  # printf "ğŸš¨ Upgrades: %d\n" "$UpgradeCount"
  free -m | awk 'NR==2{printf "ğŸ Usage: %s/%sMB (%.2f%%)\n", $3,$2,$3*100/$2 }'
  top -bn1 | grep load | awk '{printf "ğŸ§  Load: %.2f\n", $(NF-2)}'
  printf "ğŸ§ Kernel: %s\n" "$(uname -r)"
  printf "ğŸŒ¡ï¸ CPU: $CPUTemp\n"
  # printf "Workspace: $workspace\n"
)"
