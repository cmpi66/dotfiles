#!/usr/bin/env bash

## A script to easily open jobapps with scim and nvim.

has-session() {
  tmux has-session -t ja 2>/dev/null
}

launch_kitty_tmux() {
  # --title sets the window title; --class is optional if you want a distinct WM_CLASS
  kitty --title ja --class ja tmux attach-session -t ja
}

if has-session; then
  launch_kitty_tmux
else

  tmux new-session -s ja -n scim -d 'cd ~/media/sec-future/resume/sec-resume/per-role-resumes/app-tracker/; sc-im --quiet jobapps-2025-new.csv; fish -i'
  tmux new-window -t ja:2 -n search 'cd ~/media/sec-future/resume/sec-resume/per-role-resumes/app-tracker/; nvim jobapps-2025-new.csv; fish -i' # this is needed becasue sc-im doesnt have search the same as vim, too many keystrokes and case sensitive.
  tmux new-window -t ja:3 -n resumes 'cd ~/media/sec-future/resume/sec-resume/per-role-resumes/; nvim .; fish -i'
  # sleep 1
  # tmux send-keys -t ja:2 'yy' C-m

  # tmux new-window -t ja:3 -n keywords 'cd ~/media/resume/; nvim it-job-keywords.md; fish -i'
  tmux select-window -t ja:1
  launch_kitty_tmux
fi
