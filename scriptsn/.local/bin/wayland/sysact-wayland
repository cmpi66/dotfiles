#!/bin/sh

# A dmenu wrapper script for system functions.
export WM="hyprland"
case "$(readlink -f /sbin/init)" in
esac

wmpid() { # This function is needed if there are multiple instances of the window manager.
  tree="$(pstree -ps $$)"
  tree="${tree#*$WM(}"
  echo "${tree%%)*}"
}

case "$(printf "ğŸ”’ lock\nğŸ”ƒ reboot\nğŸ–¥ï¸shutdown" | bemenu -i -l 3 --width-factor 0.1 -p 'Action: ')" in
'ğŸ”’ lock') hyprlock ;;
'ğŸ”ƒ reboot') doas sh -c "sync && openrc-shutdown -r now" ;;
'ğŸ–¥ï¸shutdown') doas sh -c "sync && openrc-shutdown -p now" ;;
*) exit 1 ;;
esac
